var ScrollSpy=new Class({Implements:[Options,Events],options:{container:window,max:0,min:0,mode:"vertical"},initialize:function(e){this.setOptions(e);this.container=document.id(this.options.container);this.enters=this.leaves=0;this.inside=false;var a=this;this.listener=function(c){var b=a.container.getScroll(),d=b[a.options.mode=="vertical"?"y":"x"];if(d>=a.options.min&&(a.options.max==0||d<=a.options.max)){if(!a.inside)a.inside=true,a.enters++,a.fireEvent("enter",[b,a.enters,c]);a.fireEvent("tick",
[b,a.inside,a.enters,a.leaves,c])}else if(a.inside)a.inside=false,a.leaves++,a.fireEvent("leave",[b,a.leaves,c]);a.fireEvent("scroll",[b,a.inside,a.enters,a.leaves,c])};this.addListener()},start:function(){this.container.addEvent("scroll",this.listener)},stop:function(){this.container.removeEvent("scroll",this.listener)},addListener:function(){this.start()}});